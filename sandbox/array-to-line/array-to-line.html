<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0">
	<meta name=description content="Real-time 3D in your browser with menu sliding">
	<meta name=keywords content="Ladybug Toools,Three.js,WebGL,JavaScript,GitHub,FOSS,3D,STEM">
	<meta name="date" content="2018-01-18">
	<title></title>
	<style>
		/* Copyright 2018 pushMe pullYou authors. MIT License */

		/* https://www.w3schools.com/colors/colors_names.asp // use colors and borders to help identify the scope of particular elements */


		body,
		html {
			font: 12pt monospace;
			height: 100%;
			margin: 0;
			overflow: hidden;
		}
	</style>
</head>

<body>
	<script src="https://cdn.rawgit.com/mrdoob/three.js/r120/build/three.min.js"></script>
	<script src="https://cdn.rawgit.com/mrdoob/three.js/r120/examples/js/controls/OrbitControls.js"></script>

	<script>

		const boundary = [
			[
				27.37835292796856,
				19.630711803802829,
				3.8024934383217204
			],
			[
				7.2492546820024071,
				19.630711803802829,
				3.8024934383217204
			],
			[
				7.2492546820024071,
				17.68513601640127,
				3.8024934383217204
			],
			[
				6.4518312674325706,
				17.68513601640127,
				3.8024934383217204
			],
			[
				-1.517544550523596,
				17.685136016401295,
				3.8024934383217204
			],
			[
				-1.5175445505235918,
				22.422994359050154,
				3.8024934383217204
			],
			[
				1.9457769917136898,
				22.42299435905014,
				3.8024934383217204
			],
			[
				4.7476142620549018,
				22.422994359050133,
				3.8024934383217204
			],
			[
				4.7476142620549062,
				24.624437928603932,
				3.8024934383217204
			],
			[
				7.0491234484066085,
				24.624437928603921,
				3.8024934383217204
			],
			[
				7.0491234484066085,
				22.422994359050122,
				3.8024934383217204
			],
			[
				9.7189736558840245,
				22.422994359050115,
				3.8024934383217204
			],
			[
				9.7189736558840298,
				24.624437928603918,
				3.8024934383217204
			],
			[
				12.020482842235733,
				24.624437928603911,
				3.8024934383217204
			],
			[
				12.020482842235728,
				22.422994359050112,
				3.8024934383217204
			],
			[
				17.223894915726543,
				22.422994359050094,
				3.8024934383217204
			],
			[
				17.223894915726547,
				24.624437928603893,
				3.8024934383217204
			],
			[
				19.925666569269854,
				24.624437928603882,
				3.8024934383217204
			],
			[
				21.226519587642557,
				24.624437928603879,
				3.8024934383217204
			],
			[
				21.226519587642553,
				22.269893965349308,
				3.8024934383217204
			],
			[
				23.884561917469863,
				22.269893965349301,
				3.8024934383217204
			],
			[
				24.484955618257263,
				22.269893965349297,
				3.8024934383217204
			],
			[
				24.484955618257263,
				23.338594752750854,
				3.8024934383217204
			],
			[
				27.37835292796856,
				23.338594752750843,
				3.8024934383217204
			],
			[
				27.37835292796856,
				22.353698919417514,
				3.8024934383217204
			]
		];



		const boundary2 = [
			[
				27.37835292796856,
				19.630711803802829,
				3.8024934383217204
			],
			[
				7.2492546820024071,
				19.630711803802829,
				3.8024934383217204
			],
			[
				7.2492546820024071,
				17.68513601640127,
				3.8024934383217204
			],
			[
				6.4518312674325706,
				17.68513601640127,
				3.8024934383217204
			],
			[
				-1.517544550523596,
				17.685136016401295,
				3.8024934383217204
			],
			[
				-1.5175445505235918,
				22.422994359050154,
				3.8024934383217204
			],
			[
				1.9457769917136898,
				22.42299435905014,
				3.8024934383217204
			],
			[
				4.7476142620549018,
				22.422994359050133,
				3.8024934383217204
			],
			[
				4.7476142620549062,
				24.624437928603932,
				3.8024934383217204
			],
			[
				7.0491234484066085,
				24.624437928603921,
				3.8024934383217204
			],
			[
				7.0491234484066085,
				22.422994359050122,
				3.8024934383217204
			],
			[
				9.7189736558840245,
				22.422994359050115,
				3.8024934383217204
			],
			[
				9.7189736558840298,
				24.624437928603918,
				3.8024934383217204
			],
			[
				12.020482842235733,
				24.624437928603911,
				3.8024934383217204
			],
			[
				12.020482842235728,
				22.422994359050112,
				3.8024934383217204
			],
			[
				17.223894915726543,
				22.422994359050094,
				3.8024934383217204
			],
			[
				17.223894915726547,
				24.624437928603893,
				3.8024934383217204
			],
			[
				19.925666569269854,
				24.624437928603882,
				3.8024934383217204
			],
			[
				21.226519587642557,
				24.624437928603879,
				3.8024934383217204
			],
			[
				21.226519587642553,
				22.269893965349308,
				3.8024934383217204
			],
			[
				23.884561917469863,
				22.269893965349301,
				3.8024934383217204
			],
			[
				24.484955618257263,
				22.269893965349297,
				3.8024934383217204
			],
			[
				24.484955618257263,
				23.338594752750854,
				3.8024934383217204
			],
			[
				27.37835292796856,
				23.338594752750843,
				3.8024934383217204
			],
			[
				27.37835292796856,
				22.353698919417514,
				3.8024934383217204
			]
		];

		var renderer, camera, controls, scene;
		var geometry, material, mesh, axesHelper;

		init();
		animate();

		function init() {

			renderer = new THREE.WebGLRenderer( { alpha: 1, antialias: true } );
			renderer.setSize( window.innerWidth, window.innerHeight );

			document.body.appendChild( renderer.domElement );

			camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 1000 );
			camera.position.set( 100, 100, 100 );
			camera.up.set( 0, 0, 1 );

			controls = new THREE.OrbitControls( camera, renderer.domElement );

			scene = new THREE.Scene();

			window.addEventListener( 'resize', onWindowResize, false );
			window.addEventListener( 'orientationchange', onWindowResize, false );
			window.addEventListener( 'keyup', function () { controls.autoRotate = false; }, false );
			renderer.domElement.addEventListener( 'click', function () { controls.autoRotate = false; }, false );

			axesHelper = new THREE.AxesHelper( 50 );
			scene.add( axesHelper );

			// geometry = new THREE.BoxGeometry( 50, 50, 50 );
			// material = new THREE.MeshNormalMaterial();
			// mesh = new THREE.Mesh( geometry, material );
			// scene.add( mesh );

			const vecs = boundary2.map( item => new THREE.Vector3().fromArray( item ) );

			console.log( "vecs", vecs );

			scene.add( addLine( vecs ) );

			scene.add( getShape( vecs ) );

			scene.add( getShape3D( vecs ) );


		}


		function getShape3D( vertices ) {

			const tempVertices = getTempVertices( vertices );
			const shape = new THREE.Shape( tempVertices );
			const shapeGeometry = new THREE.ShapeGeometry( shape );
			shapeGeometry.vertices = vertices;

			const material = new THREE.MeshNormalMaterial( { side: 2 } );
			const mesh = new THREE.Mesh( shapeGeometry, material );
			return mesh;

		}



		function getTempVertices( vertices ) {

			const triangle = new THREE.Triangle( vertices[ 0 ], vertices[ 1 ], vertices[ 2 ] );
			const normal = triangle.getNormal( new THREE.Vector3() );
			console.log( "normal", normal );
			const baseNormal = new THREE.Vector3( 0, 0, 1 );
			const quaternion = new THREE.Quaternion().setFromUnitVectors( normal, baseNormal );

			const tempVertices = vertices.map( vertex => vertex.clone().applyQuaternion( quaternion ) );
			//console.log( 'tempVertices', tempVertices );

			return tempVertices;

		}


		function getShape( vertices ) {

			const v2 = ( x, y ) => new THREE.Vector2( x, y );

			points = vertices || [ v2( 0, 0 ), v2( 50, 0 ), v2( 30, 60 ), v2( 0, 40 ) ];
			console.log( "points", points );
			const shape = new THREE.Shape( points );
			const geometry = new THREE.ShapeGeometry( shape );

			const material = new THREE.MeshNormalMaterial( { side: 2 } );
			const mesh = new THREE.Mesh( geometry, material );
			return mesh;

		}


		function addLine( vertices ) {

			const v = ( x, y, z ) => new THREE.Vector3( x, y, z );

			const geometry = new THREE.Geometry();
			geometry.vertices = vertices || [ v( -10, 0, 0 ), v( 0, 10, -10 ), v( 10, 0, 0 ) ];
			const material = new THREE.LineBasicMaterial( { color: 0x000000 } );
			line = new THREE.Line( geometry, material );

			return line;

		}


		function onWindowResize() {

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );

			//console.log( 'onWindowResize  window.innerWidth', window.innerWidth );

		}



		function animate() {

			requestAnimationFrame( animate );
			renderer.render( scene, camera );
			controls.update();

		}

	</script>
</body>

</html>