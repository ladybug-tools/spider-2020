<!doctype html>
<html lang = "en" >
<head>
<meta charset = "utf-8" >
<meta name = "viewport" content= "width=device-width, initial-scale=1" >
<meta name = "description" content = "Basic TooToo HTML template" >
<meta name = "keywords" content = "JavaScript,GitHub,FOSS" >

<title></title>

<link rel="stylesheet" href="../../../style-2020-05-28.css">

</head>
<body>

	<script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r116/build/three.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r116/examples/js/controls/OrbitControls.js"></script>

	<script src="thr-threejs-aec-2020-05-27.js"></script>
	<script src="ray-raycaster-sam-2020-05-27.js"></script>
	<script src="hrt-heart-2020-05-27.js"></script>

	<details id=detNavMenu >

		<summary id=sumNavMenu class="sumPrimary gmd-1">show || hide menu</summary>

		<nav id="navMenu" class="gmd-2">

			<header id="hdrTitle">

				<h2>

					<a href="" title="Click to reload this page" >
						<span id=sTitle ></span>
						<span id=sVersion ></span>
					</a>

				</h2>

				</header>

			<p>Click or touch a surface to view its details. Click &sdotb; icon to display all the surfaces.</p>

			<details id=detFile >

				<summary class="sumPrimary gmd-1" title="Open files on your device: ">file menu</summary>

				<div id=FOdivFileOpen ></div>

				<div id="FRXdivFileReaderXml"></div>

				<div id="FOZdivFileOpenZip" ></div>

				<div id="divFileData"></div>

				<div id="THRdivRenderStats"> </div>

			</details>

			<details id=detView>

				<summary class="sumPrimary gmd-1" title="View selected surfaces" >view menu</summary>

				<div id=GXVdivTypes ></div>

			</details>

			<details id=detData  >

				<summary class="sumPrimary gmd-1" title="Browse the data in the JSON file" >data menu</summary>
				
				<div id=GXDdivData ></div>
					<p>
						<i>We need to decide what data should appear here = and how best to format it. Work-in-progress.</i>
					</p>	
				<div id=RAYdivMeshData >
				
				<p>
					Selected surface data will appear here when a surface in the 3D model is clicked on or touched.
				</p>

				</div>

				<hr>

			</details>

			<br>

			<center title="go to top of menu" ><a href=javascript:navMenu.scrollTo(0,0); style= >
				<img width=18 src="../../../assets/spider.ico" ></a>
			</center>

		</nav>

	</details>


<div id="divPopUp" class="gmd-2">When you touch a surface,<br>the rotation will stop<br>and its details will appear here </div>



<footer>

	<div id=divSetView >
		<button onclick="THR.controls.reset();" title="reset the view" class="ftrButton"><img height=32 width=32 src="https://cdn.glitch.com/7af242e2-0cf2-4179-8c41-b2f2cb982c5a%2Fnoun_Home_3359355.svg"> </button>
		<div id="divSetViewButtons" >
			<div> <button onclick="THR.setCameraPosition(0,0,200);" ">top</button></div>
			<div> <button onclick="THR.setCameraPosition(200,0,0);">right</button></div>
			<div> <button onclick="THR.setCameraPosition(-200,0,0);">left</button></div>
			<div> <button onclick="THR.setCameraPosition(0,0,-200);">bottom</button></div>
			<div> <button onclick="THR.setCameraPosition(0,-200,0);">front</button></div>
			<div> <button onclick="THR.setCameraPosition(0,200,0);">back</button></div>
		</div>
	</div>

	<button onclick="THR.controls.autoRotate=!THR.controls.autoRotate" title="toggle the rotation" class=ftrButton>&circlearrowright;</button>

	<button onclick="GXV.setAllVisible();" title="Show all surfaces" class=ftrButton>&sdotb;</button>

	<button onclick="THR.setStats();" title="View frames per second and number of draw calls" class=ftrButton>fps</button>

</footer>



<script>

sTitle.innerHTML= document.title ? document.title : location.href.split( '/' ).pop().slice( 0, - 5 ).replace( /-/g, ' ' );


init();

function init() {

	THR.init();
	HRT.init();

	THR.animate();

}



function requestFile( url = "https://example.com" , callback = onLoad ) {

	const urlCORS = 'https://cors-anywhere.herokuapp.com/';

	xhr = new XMLHttpRequest();
	xhr.open( 'GET', urlCORS + url, true );
	xhr.onerror = ( xhr ) => console.log( 'error:', xhr  );
	//xhr.onprogress = ( xhr ) => console.log( 'bytes loaded:', xhr.loaded );
	xhr.onload = ( xhr ) => callback( xhr.target.response );
	xhr.send( null );

}



function onLoad( response ) {

	console.log( "response", response );

}



</script>
</body>
</html>