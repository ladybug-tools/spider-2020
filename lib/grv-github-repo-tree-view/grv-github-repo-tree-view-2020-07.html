<!doctype html>
<html lang = "en" >
<head>
<meta charset = "utf-8" >
<meta name = "viewport" content="width=device-width,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0" />
<meta name = "description" content = "2020 Home page providing access to all the current Spider file viewers hosted using GitHub Pages." >
<meta name = "keywords" content = "JavaScript,GitHub,FOSS" >
<meta name = "version" content="2020-07-07">

<link rel="stylesheet" href="../../lib/style/style-2020-07-10.css">

<title></title>

</head>
<body>

    <script src="../../lib/grv-github-repo-tree-view/grv-github-repo-tree-view-2020-07-06.js"></script>

	<script src="../../lib/fo-file-open/foo-file-open-object-2020-07-07.js"></script>
	<script src="../../lib/fo-file-open/foz-file-open-zip-2020-07-07.js"></script>
	<script src="../../lib/fo-file-open/fr-file-reader-2020-07-06.js"></script>

	<details id=detNavMenu >

		<summary id=sumNavMenu class="summary-primary gmd-1">show || hide menu</summary>

		<nav id="navMenu" class="gmd-2">

			<header id="hdrTitle">

				<h2>

					<a id=aGithub href="https://github.com/ladybug-tools/spider-2020/tree/master/lib/grv-github-repo-tree-view/" target="_top" title="Source code on GitHub">
						<img src="../assets/icons/octicon.svg">
					</a>

					<a id=aTitle href="" title="Click to reload this page">
						GRV GitHub Repo Tree View
					</a>
					
					<span class="info">
						<img class=infoImg  src="../assets/icons/noun_Information_585560.svg"> 
						<span id="divDescription" class="infoTooltip gmd-5">

					</span></span>

				</h2>

			</header>

			<div id=divNavLog ></div>

			<details id=detFile >

				<summary class="summary-primary gmd-1" title="Open files on your device: ">file menu</summary>

				<div id=FRdivMenuFileReader></div>

				<p>
					<input type=file id=FRinpFile onchange=FR.readFile(this); accept = "*" >
				</p>
		
				<div id=FOOdivLog >to be reset</div>
		
				<div id=FOZdivFileOpenZip ></div>

				<div id=divLog ></div>

			</details>

			<details ontoggle="" open>

				<summary class="summary-primary gmd-1" title="View selected items" >repo files</summary>

				<div class=divNavResize >

					<p>Files you can load, view and experiment with:</p>
					
					<div id=GRVdivGitHubRepoTreeView ></div>
					
					<br>

				</div>

			</details>
<!-- 
			<details class=detNavMenu id=detView ontoggle="">

				<summary class="sumPrimary gmd-1" title="View selected model aspects" >view menu</summary>

				<div class=divNavResize >

					<div id=VTdivViewTypes ></div>

					<div id=VTdivAttributes></div>

				</div>

			</details>

			<details class=detNavMenu id=detData ontoggle=JTV.init();JTV.onLoad(); >

				<summary class="sumPrimary gmd-1" title="Browse the data in the file" >data menu</summary>

				<div class=divNavResize >

					<p>
						<i>We need to decide what data should appear here & and how best to format it. Work-in-progress.</i>
					</p>	
					
					<div id=JTHdivJsonTreeHelper ></div>
					
					<div id=JTFdivJsonTreeFinder ></div>
					
					<div id=JTEdivJsonTreeEdit ></div>
					
					<div id=JTVdivJsonTreeView ></div>
					
					<hr>
					
				</div>

			</details> -->

			<hr>

			<footer>
	
				<div title="go to top of menu" style=text-align:center; >
					<a class=aDingbat href=javascript:navMenu.scrollTo(0,0); >
						‚ù¶
					</a>
				</div>
				
			</footer>

		</nav>

	</details>


<main>

	<div id="divContentMain" >

		<iframe id=ifr style="border-width: 0 1px 1px 0;height:100%;width:100%;" ></iframe>

	</div>

</main>

<div id="divPopUp" class="gmd-2">Welcome! </div>



<script>


divDescription.innerHTML = document.head.querySelector( "[ name=description ]" ).content;


init();

function init() {

	const urlApi = "https://api.github.com/repos/ladybug-tools/spider-2020/git/trees/master?recursive=1";
	
	requestFile( urlApi, GRV.onLoadTree );

	window.addEventListener( "hashchange", onHashChange, false );

	onHashChange();

	if ( window.innerWidth < 640 || window.innerHeight < 640 ) {


	} else {

		detNavMenu.open = true

	}

	// if running on server, keeps address bar pointed to latest dev

	if ( !location.hash && location.protocol === "https:" ) {

		window.history.pushState( "", "", "./" );

	}

}

function onHashChange() {

	if ( !location.hash ) {

		ifr.src = "../../readme.html";

		return;

	}

	let path = "../../"; //path needs review in every new instance

	if ( location.hash.endsWith( ".md" ) ) { // use readme.html to convert markdown to HTML

		path += "readme.html#";  

	}

	ifr.src = path + location.hash.slice( 1 );


}


function requestFile( url = "https://example.com" , callback = onLoad ) {

	//const urlCORS = "https://cors-anywhere.herokuapp.com/";

	const xhr = new XMLHttpRequest();
	xhr.open( "GET", url, true );
	xhr.responseType = "json";
	xhr.onerror = ( xhr ) => console.log( "error:", xhr  );
	//xhr.onprogress = ( xhr ) => console.log( "bytes loaded:", xhr.loaded );
	xhr.onload = ( xhr ) => callback( xhr.target.response );
	xhr.send( null );

}



function onLoad( response ) {

	console.log( "response", response );

}



</script>
</body>
</html>